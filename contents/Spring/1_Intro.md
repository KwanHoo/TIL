# Spring Intro \_ JPA 설치 및 실행

## Spring

- Spring by VMware Tanzu
- VM : 가상머신
- 스프링은 VMware가 바탕임

- microservices
- reactive
- cloud
- web apps
- serverless
- event driven
- batch

### 서버

- 또 하나의 PC??
- 제공자
- PC의 데이터를 가져갈 수 있게 열어주면 서버임 (장비를 오픈 하면 서버임)
  - 포트 : 들어오는 입구 (포트 번호 : 8080, 3000, … )
- 포트를 열어 놓으면 그거를 타고 들어 올 수 있음

  - 그 문을 통해서 들어오면 거기에 열어둔것만 볼 수 있게 권한설정
  - +데이터 양 증가 → 서버관리

- Java → 서버 개발에 왜 많이 사용하는가?? 왜 우리나라는??
- 대중적이니깐 : 개발자 = Java
- c를 사용해서 만든 대표적인 언어가 Java
- 왜 객체지향으로 만들어야 했는가?
- 왜 프로그램이 발전하는가?
  - 1. 군사목적 → 과거 빠른 통신 위해
  - 2. 유흥 → 게임산업 →블럭깨기→→ 멀티 플레이 / 롤 플레이 (인스턴스 개념 도입됨)
    - ex) 마인크래프트 : java ⇒ 스웨덴에서 만들어서 MS가 삼

## Spring Data JPA (Java Persistence Api)

[참고링크](https://spring.io/projects/spring-data-jpa)

- java는 객체 중심
- DB는 표 중심

1. 객체랑 표가 안맞음

2. mybatis → sql → sql을 자동으로 써주는게 있으면 좋겠다!! → 하이버네이트 (게빈킹!!)

### 하이버네이트

- 자바 언어를 위한 객체 관계 매핑 프레임워크
- 클래스가 그대로 DB로 쓸 수 있으면 좋겠다
- Hibernate ORM → JPA
- jar : 자르 / war : 와르

---

## 01.스프링 부트란?

스프링 프레임워크는 자바 기반의 애플리케이션 프레임워크로 엔터프라이즈급 애플리케이션을 개발하기 위한 다양한 기능을 제공함
스프링은 목적에 따라 다양한 프로젝트를 제공하는데 그중 하나가 스프링 부트임

### 1.1스프링 프레임워크

- 자바에서 가장 많이 사용하는 프레임워크임
- 자바로 애플리케이션을 개발하는데 필요한 기능을 제공하고 쉽게 사용하도록 돕는 도구임
- "애플리케이션 개발에 필요한 기반을 제공해서 개발자가 비즈니스 로직 구현에만 집중할 수 있게끔 하는것"

#### 1.1.1 제어역전(IoC)

- 일반적인 자바 개발의 경우 사용하려는 객체를 선언하고 해당 객체의 의존성을 생성한 후 객체에서 제공하는 기능을 사용함

  - 객체를 생성하고 사용하는 일련의 작업을 개발자가 직접 제어하는 구조임

- 하지만 제어 역전(Inversion of Control)을 특징으로 하는 스프링은 기존 자바 개발 방식과 다르게 동작함
- IoC를 적용한 환경에서는 사용할 객체를 직접 생성하지 않고 객체의 생명주기 관리를 외부에 위임함
  - 외부 : 스프링 컨테이너 or IoC 컨테이너를 의미함
- 객체의 관리를 컨테이너에 맡겨 제어권이 넘어간 것을 제어 역전이라고 부름
- 제어 역전을 통해 의존성 주입(DI), 관점 지향 프로그래밍(AOP) 등이 가능해짐

#### 1.1.2 의존성 주입(DI)

- Dpendency Injection
- 제어 역전의 방법 중 하나로 사용할 객체를 직접 생성하지 않고 외부 컨테이너가 생성한 객체를 주입받아 사용하는 방식을 의미함

  - 생성자를 통한 의존성 주입
  - 필드 객체 선언을 통한 의존성 주입
  - setter 메서드를 통한 의존성 주입

- 다른 방식과는 다르게 생성자를 통해 의존성을 주입받는 방식은 래퍼런스 객체 없이는 객체를 초기화할 수 없는게 설꼐할 수 있음
- @Autowired 라는 어노테이션을 통해 의존성을 주입할 수 있음

#### 1.1.3 관점 지향 프로그래밍(AOP)

- Aspect-Oriented Programming
- AOP는 OOP를 더욱 잘 사용하도록 돕는 개념으로 보면 됨
- AOP는 관점을 기준으로 묶어 개발하는 방식을 의미함
- 관점(aspect)이란 어떤 기능을 구현할 때 그 기능을 '핵심 기능'과 '부가 기능'으로 구분해 각각을 하나의 관점으로 보는 것을 의미함
  - '핵심기능' : 비즈니스 로직을 구현하는 과정에서 비즈니스 로직이 처리하려는 목적 기능
  - '부가기능' : 핵심 기능이 어떤 기능인지에 무관하게 로직이 수행되기 전 또는 후에 수행되기만 하면 됨
- 여러 비즈니스 로직에서 반복되는 부가 기능을 하나의 공통 로직으로 처리하도록 모듈화해 삽입하는 방식을 AOP라고 함

- 스프링은 디자인 패턴 중 하나인 프락시 패턴을 통해 AOP 기능을 제공하고 있음

#### 1.1.4 스프링 프레임워크의 다양한 모듈

- 기능별로 구분된 약 20여 개의 모듈로 구성돼 있음
- 경량 컨테이너 설계

### 1.2 스프링 프레임워크 vs 스프링 부트

- 스프링에서 하이버네이트를 사용함
  - 설정이 복잡함
- 스프링 부트를 사용하면 개발이 쉬워짐

> > > > 스프링이 가진 특징 ->

#### 1.2.1 의존성 관리

- 'spring-boot-starter' 의존성을 제공함

#### 1.2.2 자동 설정

- 스프링 프레임워크를 사용하기 위한 자동 설정을 지원함
- 애플리케이션을 개발하는데 필요한 의존성을 추가하면 프레임워크가 이를 자동으로 관리해줌

- @SpringBootApplication 어노테이션
  - @SpringBootConfiguration
  - @EnableAutoConfiguration
  - @ComponentScan

참고==

- @Component 시리즈 어노테이션의 대표적인 예
  - @Controller
  - @RestController
  - @Service
  - @Repository
  - @Configuration

#### 1.2.3 내장 WAS

- 내장 WAS라니!!!!!!

#### 1.2.4 모니터링

- 시스템이 사용하는 메모리, 스레드, 세션 등의 주요 요소들을 모니터링해야 함
- 스프링 부트 액추에이터 (Spring Boot Actucator)라는 자체 모니터링 도구가 있음

### 2.3 레이어드 아키텍처

- 애플리케이션의 컴포넌트를 유사 관심사를 기준으로 레이어로 묶어 수평적으로 구성한 구조를 의미함

- 프레젠테이션 계층

  - 애플리케이션의 최상단 계층으로, 클라이언트의 요청을 해석하고 응답하는 역할임
  - UI나 API를 제공함
  - 별도의 비즈니스 로직을 포함하고 있지 않으므로 비즈니스 계층으로 요청을 위임하고 받은 결과를 응답하는 역할만 수행함

- 비즈니스 계층

  - 애플리케이션이 제공하는 기능을 정의하고 세부 작업을 수행하는 도메인 객체를 통해 업무를 위임하는 역할을 수행함
  - DDD 기반의 아키텍처에서는 비즈니스 로직에 도메인이 포함되기도 하고 별도로 도메인 계층을 두기도 함

- 데이터 접근 계층

  - 데이터베이스에 접근하는 일련의 작업을 수행함

- 각 레이어는 가장 가까운 하위 레이어의 의존성을 주입받음
- 각 레이어는 관심사에 따라 묶여 있으며, 다른 레이어의 역할을 침범하지 않음

  - 각 컴포넌트의 역할이 명확하므로 코드의 가독성과 기능 구현에 유리함
  - 코드의 확장성도 좋아짐

- 각 레이어가 독립적으로 작성되면 다른 레이어와의 의존성을 낮춰 단위 테스트에 용이함

##### spring mvc

- Model - View - Controller 구조
- View와 Controller는 프레젠테이션 계층 영역임
- Model은 비즈니스와 데이터 접근 계층의 영역으로 구분할 수 있음

- DAO (Spring Data JPA에서는 Repository)를 데이터 접근 계층에 배치해 도메인을 관리함

- 프레젠테이션 계층

  - 상황에 따라 유저 인터페이스 계층이라 함
  - 클라이언트와의 접점이 됨!!!
  - 클라이언트로부터 데이터와 함께 요청을 받고 처리 결과를 응답으로 전달하는 역할임

- 비즈니스 계층

  - 상황에 따라 서비스 계층이라고도 함
  - 핵심 비즈니스 로직을 구현하는 영역임!!!!!
  - 트랜잭션 처리나 유효성 검사 등의 작업도 수행함

- 데이터 접근 계층

  - 상황에 따라 영속(Persistence) 계층이라고도 함
  - 데이터베이스에 접근해야 하는 작업을 수행함
  - DAO 역할을 리포지토리가 수행하기 때문에 리포지토리로 대체할 수 있음

- 비즈니스 로직은 도메인 계층에서 담당하는 것이 일반적임
- 스프링에서 JPA를 사용하면 @Entity를 정의한 클래스가 도메인 객체가 되며 이곳에서 비즈니스 로직을 설계하면 좋음

### 2.4 디자인 패턴

### 2.5 REST API

- 애플리케이션 인터페이스
- 클라이언트는 서버에 접근하고 자원을 조작할 수 있음

#### 2.5.1 REST 란?

- 분산 하이퍼미디어 시스템 아키텍처의 한 형식임
- 주고받는 자원에 이름을 규정하고 URI에 명시해 HTTP 메서드 (GET, POST, PUT, DELETE)를 통해 해당 자원의 상태를 주고받는 것을 의미함

#### 2.5.2 REST API란?

- API : 애플리케이션에서 제공하는 인터페이스
  - API를 통해 서버 또는 프로그램 사이를 연결할 수 있음
- REST API는 REST 아키텍처를 따르는 시스템/애플리케이션 인터페이스라고 볼 수 있음

### 5.2.1 @RequestMapping으로 구현하기

- @RequestMapping 어노테이션을 별다른 설정 없이 선언하면 HTTP의 모든 요청을 받음
- 그러나 GET 형식의 요청만 받기 위해서는 오노테이션에 별도 설정이 필요함

  - method = RequestMetod.GET

- @GetMapping
- @PostMapping
- @PutMapping
- @DeleteMapping

##### URI와 URL의 차이

- URL : 우리가 흔히 말하는 웹 주소를 의마하며 리소스가 어디에 있는지 알려주기 위한 경로를 의미함
- URI : 특정 리소스를 식별할 수 있는 식별자를 의미함

- 웹에서는 URL을 통해 리소스가 어느 서버에 위치해 있는지 알 수 있으며 그 서버에 접근해서 리소스에 접근하기 위해서 대부분 URI가 필요함

#### 5.2.5 DTO 객체를 활용한 GET 메서드 구현

DTO란?

- Data Transfer Object의 약자
- 다른 레이어 간의 데이터 교환에 활용됨
- 각 클래스 및 인터페이스를 호출하면서 전달하는 매개변수로 사용되는 데이터 객체임

- DTO는 데이터를 교환하는 용도로만 사용하는 객체이기 때문에 DTO에는 별도의 로직이 포함되지 않음

##### DTO와 VO

- 역할과 사용법에서 차이가 있음

VO

- 데이터 그 자체로 의미가 있는 객체를 의미함
  DTO
- 데이터 전송을 위해 사용되는 데이터 컨테이너

### 5.3 POST API 만들기

- 웹 애플리케이션을 통해 데이터베이스 등의 저장소에 리소스를 저장할 때 사용되는 API임
- 저장하고자 하는 리로스나 값을 HTTP 바디(Body)에 담아 서버에 전달함
- URI 가 GET API에 비해 간단함

### 5.6 REST API 명세를 문서화하는 방법 - Swagger

- API를 개발하면 명세를 관리해야함
- 명세란 해당 API가 어떤 로직을 수행하는지 설명하고 이 로직을 수행하기 위해 어떤 값을 요청하며, 이에 따른 응답값으로는 무엇을 받을 수 있는지를 정리한 자료임

- API는 개발 과정에서 계속 변경되므로 작성한 명세 문서도 주기적인 업데이트가 필요함
