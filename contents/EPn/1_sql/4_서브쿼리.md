# 서브 쿼리

#### 정의

- 하나의 쿼리 안에 포함된 또 하나의 쿼리
- 메인 쿼리가 서브쿼리르 포함하는 종속적인 관계

#### 특징

- 알려지지 않은 기준을 이용한 검색에 유용
- 메인 쿼리가 실행되기 이전에 한 번만 실행
- 한 문장에서 여러 번 사용 가능

#### 사용시 주의사항

- 서브쿼리는 괄호와 함께 사용되어야 함
- 서브쿼리 안에서 ORDER BY 절은 사용할 수 없음
- 서브쿼리는 연산자의 오른쪽에 사용되어야 함
- 서브쿼리는 오로지 SELECT 문으로만 작성 할 수 있음

```SQL
-- 기존
SELECT * FROM employee
WHERE 급여 > 3500;

-- 단일행 서브쿼리
SELECT * FROM employee
WHERE 급여 >
(SELECT 급여 FROM employee WHERE 이름='gildong');

-- 다중행 서브쿼리
SELECT * FROM employee
WHERE 급여 IN
(SELECT max(급여) FROM employee GROUP BY 부서번호);

```

#### 단일행 연산자

- = : 같다
- <> : 같지 않다
- > : 크다
- > = : 크거나 같다
- < : 작다
- <= : 작거나 같다

#### 다중행 연산자

- IN : 하나라도 만족하면 반환
- ANY : 하나라도 만족하면 반환 비교연산가능
- ALL : 모두 만족하면 반환 비교 연산 가능

### 위치에 따른 분류

- 일반적인 서브쿼리 형태 : WHERE 절에 사용
- 스칼라 서브쿼리 : SELECT 절에 사용
  - 스칼라 서브쿼리는 오로지 한 행만 반환
  - 마치 JOIN을 사용한 것과 같은 결과를 나타냄

참고 : 엘리스
