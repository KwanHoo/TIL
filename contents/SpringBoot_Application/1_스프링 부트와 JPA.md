# 1\_스프링 부트와 JPA

# 1.JPA 개념

## [1] JPA (Java Persistence API)

### JPA 등장

- 데이터 연동 기술

1. 전통적인 JDBC
2. 데이터 매퍼(Mapper) 기술 MyBaTIS, Spring JDBC
3. 대표적 ORM(Object Relational Mapping) 기술 Hibernate

#### ORM

- iBATIS, MyBATIS 등의 데이터 매퍼와 달리 데이터베이스 연동에 필요한 JAVA 코드, 실질적인 SQL 구문까지 제공
- 개발 및 유지보수성을 극적으로 향상시킴

- Hibernate의 성공 > 수많은 ORM 프레임워크 등장 > ORM 프레임워크 표준화 > JPA

### JPA 개념

- JPA는 다향성을 기반으로 제공되는 JDBC API와 동일한 개념으로 이해할 수 있음
- 자바의 다형성은 객체 지향 프로그래밍(OOP)의 중요한 개념 중 하나입니다. 다형성은 "다양한 형태를 가질 수 있는 능력"을 의미하며, 자바에서는 주로 두 가지 형태로 나타납니다: 업캐스팅(upcasting)과 메소드 오버라이딩(method overriding)을 통한 다형성임

- JPA(Java Persistence API)에서의 다형성은 객체 지향 프로그래밍의 다형성을 데이터베이스와 연동할 때 나타나는 개념입니다. 주로 상속 관계에 있는 엔터티들이나 다양한 타입의 객체들을 효과적으로 다루기 위해 사용됨

### JPA 구현체

- JPA를 이용한 데이터베이스 연동 처리
- 실제로 JPA를 구현한 구현체가 동작함
- JPA는 모든 ORM 프레임워크를 일관된 방법으로 사용할 수 있도록 제공된 확장 API인 것

1. JPA를 구현한 구현체는 Hibernate, EclipseLink, DataNucleus 등 다양하게 존재함
2. JPA를 이용하여 애플리케이션 개발 시 유지보수 과정에서 JPA 구현체를 쉽게 변경할 수 있음

- 별도의 설정이 없으면 JPA는 Hibernate를 기본 규현체로 사용함

## [2] JPA 동작원리

### JPA와 JDBC

- JPA : Java 애플리케이션과 JDBC 사이에 존재하면서 JDBC의 복잡한 절차를 대신 처리함

- JDBC(Java Database Connectivity)는 자바 프로그램에서 데이터베이스와 연결하여 데이터를 관리하고 조작하기 위한 자바 API(애플리케이션 프로그래밍 인터페이스)입니다. JDBC를 사용하면 자바 언어로 작성된 애플리케이션에서 다양한 데이터베이스에 접근할 수 있음

- JPA는 내부적으로는 JDBC API를 이용하여 데이터베이스 연동을 처리함
- JPA가 일종의 프록시(대리자) 역할을 수행하는 것
- JAVA애플리케이션 ↔ JPA ↔ JDBC API ↔ 데이터베이스

### JPA와 SQL

- 애플리케이션에서 생성한 JAVA 객체 (Value Object)를 관계형 데이터베이스 테이블과 자동으로 매핑함
- JAVA 객체의 클래스 이름을 테이블과 매핑하고 멤버 변수는 컬럼과 매핑하면 일관성 있는 SQL을 생성할 수 있음

## [3] DB H2

### H2 데이터베이스

- 순수 JAVA로 만든 관계형 데이터베이스
- 용량이 작고 실행 속도가 빠른 오픈 소스 데이터베이스

- 일반적인 JDBC 지원
- 인메모리, 서버 모드 까지 지원

- H2 : 브라우저 기반의 관리 콘솔 제공
- 스프링 부트 : 기본적으로 H2 지원
  - 테스트용 데이터베이스로 적합함

---

# 2.JPA 퀵 스타트

## 엔티티 클래스 작성 및 테이블 매핑

### 엔티티 작성

- 테이블과 매핑되는 클래스를 엔티티 클래스라 함
- JPA는 엔티티와 매핑된 테이블이 존재하지 않을 때 엔티티 클래스를 기준으로 테이블을 생성함

- 엔티티 클래스의 멤버 변수는 private으로 선언함
- @Data를 설정하여 public Getter/Setter 메소드를 제너레이션 함

### 엔티티 매핑

- JPA가 제공하는 어노테이션을 이용하여 엔티티 클래스와 테이블을 매핑하며 각 어노테이션의 의미는 다음과 같음
- @Entity : Board 클래스를 엔티티 클래스로 설정함 (필수)
- @Table : 엔티티 클래스와 테이블 이름이 다른 경우, name 속성으로 매핑함
- @Id : 테이블의 기본 키 (PK)를 매핑함 (필수)
- @GeneratedValue : @Id가 선언된 필드에 자동으로 증가된 값을 할당함

## Persistence 설정

### Persistence.xml 설정

- JPA는 클래스 패스에 존재하는 persistence.xml 파일을 로딩하여 데이터베이스 연동에 필요한 정보들을 획득함
- persistence.xml 파일 영속성 유닛(Persistence Unit)을 설정하며, 영속성 유닛 설정에 JPA가 사용할 엔티티 클래스나 데이터베이스에 대한 정보들이 포함됨

참고 : e-koreatech 스프링부트기초
