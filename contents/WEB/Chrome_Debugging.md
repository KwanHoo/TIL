# chrome으로 디버깅하기

- 디버깅(debugging)은 스크립트 내 에러를 검출해 제거하는 일련의 과정을 의미함
- 모던 브라우저와 호스트 환경 대부부은 개발자 도구 안에 UI 형태로 디버깅 툴을 구비해 놓음
- 디버깅 툴을 사용하면 디버깅이 훨씬 쉬워지고, 실행 단계마다 어떤 일이 일어나는지를 코드 단위로 추적할 수 있음

## ‘Sources’ 패널

- F12를 눌러 개발자 도구를 열수있음
- Source 탭 클릭하면 sources 패널을 열 수 있음

sources 패널은 크게 3개의 영역으로 구성됨

1. 파일 탐색 영역
   1. 페이지를 구성하는데 쓰인 모든 리소스(HTML, JavaScript, CSS, 이미지 파일 등)를 트리 형태로 보여줌
2. 코드 에디터 영역
   1. 리소스 영역에서 선택한 파일의 소스 코들르 보여줌
   2. 여기서 소스 코드를 편집할 수도 있음
3. 자바스크립트 디버깅 영역
   1. 디버깅에 관련된 기능을 제공함

## 콘솔

- Esc를 누르면 개발자 도구 하단부에 콘솔 창이 열림
- 콘솔창에서 명령어를 입력하고 Enter를 누르면 입력한 명령어가 실행됨
- 콘솔 창에 구문(statement)을 입력하고 실행하면 아랫줄에 실행 결과가 출력됨

## 중단점

- breakpoint(중단점)은 말 그대로 자바스크립트의 실행이 중단되는 코드 내 지점을 의미함
- 중단점을 이용하면 실행이 중지된 시점에 변수가 어떤 값을 담고 있는지 알 수 잇음
- 또한 실행이 중지된 시점을 기준으로 명령어를 실행할 수도 있음 (디버깅이 가능해지는 것)
  - 항목을 클릭해 해당 준담점이 설정된 곳으로 바로 이동 할 수 있음
  - 체크 박스 선택을 해제해 해당 중단점을 비활성화 할 수 있음
  - 마우스 오른쪽 버튼을 클릭했을 때 나오는 ‘Remove breakpoint’ 옵션을 통해 중단점을 삭제할 수도 있음

### 조건무 중단점

- 줄 번호에 커서를 옮긴 후 마우스 오른쪽 버튼을 클릭하면 조건부 중단점 (conditional breakpoint)을 설정할 수 있음
- Add conditional breakpoint를 클릭했을 때 뜨는 작은 창에 표현식을 입력하면, 표현식이 참인 경우에만 실행을 중지시킬 수 있음
- 조건부 중단점을 설정하면 변수에 특정 값이 할당될 때나 함수의 매개 변수에 특정 값이 들어올 때만 실행을 중단시킬 수 있어 디버깅 시 유용하게 활용 가능함

## debugger 명령어

스크립트 내에 debugger 명령어를 적어주면 중단점을 설정한 것과 같은 효과를 봄

debugger 명령어를 사용하면 브라우저를 켜 개발자 도구를 열고 소스 코드 영역을 띄워 중단점을 설정하는 수고를 하지 않아도되며 에디터를 떠나지 않고도 중단점을 설정할 수 있기 때문에 편리함

## 멈추면 보이는 것들

1. Watch - 표현식을 평가하고 결과를 보여줌
   - Add Expression 버튼 + 를 클릭해 원하는 표현식을 입력한 후 Enter를 누르면 중단 시점의 값을 보여줌
   - 입력한 표현식은 실행 과정 중에 계속해서 재평가됨
2. Call Stack - 코드를 해당 중단점으로 안내한 실행 경로를 역순으로 표시함
   - 함수 내에 중단점을 설정했을 경우 콜 스택(Call Stack) 최상단엔 중단점을 걸어둔 함수가 위치함
3. Scop - 현재 정의된 모든 변수를 출력함
   - Local 은 함수의 지역변수를 보여줌
     - 지역 변수 정보는 소스 코드 영역에서도 확인(강조 표시) 할 수 있음
   - Global 은 함수 바깥에 정의된 전역 변수를 보여줌
   - Local 하위 항목으로 this에 대한 정보도 출력됨

## 실행 추적하기

디버깅 영역 상단에 있는 버튼들의 역할

- ‘Resume’ : 스크립트 실행을 다시 시작함 ( 단축키 F8 )
  - 실행을 제개함
  - 추가 중단점이 없는 경우, 실행이 죽 이어지고 디버거는 동작하지 않음
- ‘Step’ : 다음 명령어를 실행함 ( 단축키 F9 )

  - 다음 문을 실행함
  - Step 버튼을 계속 누르면 스크립트 전체를 문 단위로 하나하나 실행할 수 있음

- ‘Step over’ : 다음 명령어를 실행하되, 함수 안으로 들어가진 않음 ( 단축키 F10 )

  - ‘Step’과 유사하지만, 다음 문이 함수 호출일 때 ‘Step’과는 다르게 동작함
    - (alert 같은 내장함수에는 해당하지 않고, 직접 작성한 함수일 때만 동작이 다름)
  - ‘Step’은 함수 내부로 들어가 함수 본문 첫 번째 줄에서 실행을 멈춤
  - 반면 ‘Step over’는 보이지 않는 곳에서 중첩 함수를 실행하긴 하지만 함수 내로 진입하지 않음
  - 실행은 함수 실행이 끝난 후에 즉시 멈춤
  - ‘Step over’는 함수 호출 시 내부에서 어떤 일이 일어나는지 궁금하지 않을 때 유용함

- ‘Step into’ : ( 단축키 F11 )

  - ‘Step’ 과 유사한데, 비동기 함수 호출에서 ‘Step’과는 다르게 동작함
  - ‘Step’은 setTimeout( 함수 호출 스케줄링에 쓰이는 내장 메서드 ) 같은 비동기 동작은 무시함
  - 반면 ‘Step into’는 비동기 동작을 담당하는 코드로 진입하고, 필요하ㄷ면 비동기 동작이 완료될 때까지 대기함

- ‘Step out’ : 실행 중인 함수의 실행이 끝날 때 까지 실행을 계속함 ( 단축키 : Shift + F11 )
  - 현재 실행 중인 함수의 실행을 계속 이어가다가 함수 본문 마지막 줄에서 실행을 멈춤
  - 실수로 ‘Step’을 눌러 내부 동작을 알고 싶지 않은 중첩 함수로 진입했거나 가능한 한 빨리 함수 실행을 끝내고 싶은 경우 유용함
- 모든 중단점을 활성화 / 비활성화

  - 모든 중단점을 일시적으로 활설화 / 비활성화함 (실행에는 영향이 없음)

- 예외 발생 시 코드를 자동 중지시켜주는 기능을 활성화 / 비활성화
  - 활설화되어 있고, 개발자 도구가 열려있는 상태에서 스크립트 실행 중에 에러가 발생하면 실행이 자동으로 멈춤
  - 실행이 중단되었기 때문에 변수 등을 조사해 어디서 에러가 발생했는지 찾을 수 있게 됨
  - 개발하다가 에러와 함께 스크립트가 죽었다면 디버거를 열고 이 옵션을 활성화한 후, 페이지를 새로 고침하면 에러가 발생한 곳과 에러 발생 시점의 컨텍스트를 확인할 수 있음

### Continue to here 옵션

- 특정 줄에서 마우스 오른쪽 버튼을 클릭해 컨텍스트 메뉴를 열면 “Continue to here” 라는 옵션을 볼 수 있음
- 중단점을 설정하기는 귀찮은데 해당 줄에서 실행을 재개하고 싶을때 유용한 옵션임

## console.log

console.log 함수를 이용하면 원하는 것을 콘솔에 출력할 수 있음

- 결과는 콘솔창에만 있기 때문에 일반 사용자는 결과를 볼 수 없음
- 결과를 보려면 개발자 도구의 콘솔 패널을 직접 열거나 다른 패널이 열린 상태에서 Esc를 눌러 화면 하단에 콘솔 패널을 띄우면 됨
- 코드에 console.log를 적절히 넣어주었다면 디버거 없이도 무슨 일이 일어나고 있는지 충분히 파악할 수 있으므로, console.log 함수와 디버거를 적절히 활용하자!

[참고 포스팅](https://ko.javascript.info/debugging-chrome)

---
