# LAN을 넘어서는 네트워크 계층

#### 포인트

- 라우팅 : 네트워크 계층에서 통신을 빠르게 주고받기 위해 패킷이 이동할 최적의 경로 결정
- IP : 네트워크 계층의 핵심 프로토콜. IP 주소 지정과 IP 단편화를 수행
- 네트워크 계층의 IP 주소를 이용해 네트워크상의 호스트를 식별할 수 있음
- ARP : 동일 네트워크 내에 있는 호스트 IP 주소를 통해 MAC 주소를 알아내기 위한 프로토콜

### 데이터 링크 계층의 한계

- 물리 계층과 데이터 링크 계층만으로는 LAN을 넘어서 통신하기 어려움

  1. 도달 경로를 파악하기 어려움
  2. MAC 주소만으로는 모든 네트워크에 속한 호스트의 위치를 특징하기 어려움

- 라우팅 : 패킷이 이동할 최적의 경로를 결정하는 것
- 라우터 : 라우팅을 수행하는 대표적인 장비

- MAC 주소 : 택배의 수신인 역할을 하는 정보 (수신인) - 물리주소
- IP 주소 : 수신지 역할 (주소지) - 논리주소
  - DHCP : IP 주소 자동 할당 프로토콜

### 인터넷 프로토콜

- IPv4
  - ex) 192.168.1.1
- IPv6

#### IP의 기능

- IP 주소 지정
  - IP 주소를 바탕으로 송수신 대상을 지정하는 것
- IP 단편화
  - 전송하고자 하는 패킷의 크기가 MTU라는 최대 전송 단위보다 클 경우 이를 MTU 크기 이하의 복수의 패킷으로 나누는 것

#### IPv4 패킷 헤더

1. 식별자
2. 플래그
3. 단편화 오프셋
4. TTL
5. 프로토콜
6. 헤더 체크섬
7. 송신지 IP 주소
8. 수신지 IP 주소
   ... 등

### ARP

- IP 주소를 통해 MAC 주소를 알아내는 프로토콜
- 동일 네트워크 내에 있는 송수신 대상의 IP 주소를 통해 MAC 주소를 알아낼 수 있음

1. ARP 요청
2. ARP 응답
3. ARP 테이블 갱신

참고 : 혼공네 복습
