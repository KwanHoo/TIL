# 전송 계층 개요 \_ IP 한계와 포트

#### 포인트

- 전송 계층 :

  - 네트워크 계층과 응용 계층 사이에 위치함
  - 신뢰할 수 있는 연결형 통신이 가능한 프로토콜을 제공하기에 네트워크 계층의 한계를 보완할 수 있음
  - 포트를 통해 응용 계층의 애플리케이션을 식별함으로써 응용 계층과의 연결 다리 역할을 수행함

- 신뢰할 수 없는 통신 : 패킷이 수신지 까지 제대로 전송되었다는 보장을 하지 않는 통신 특성을 일컬음
- 비연결형 통신 : 송수신 호스트간에 사전 연결 수립 작업을 거치지 않는 통신 특성을 의미함
- 포트 :
  - 응용 계층의 애플리케이션 프로세스를 식별하는 정보임
  - 잘 알려진 포트, 등록된 포트, 동적 포트가 있음
- NAT : IP 주소를 변환하는 기술임
- 포트 기반의 NAT인 NAPT는 NAT 테이블에 변환될 IP 주소 쌍과 더불어 포트 번호도 함께 기록함

### 신뢰할 수 없는 통신과 비연결형 통신

IP 프로토콜 : IP 단편화, IP 주소 지정 함 but. 한계점 있음

1. 신뢰할수 없는 (비신뢰성) 프로토콜
   - 패킷의 데이터 손상, 중복 이를 확인 하지 않음, 재전송 X, 순서 보장 X
2. 비연결형 프로토콜 - 그저 수신지를 향해 패킷을 보내기만 함
   -> IP를 통한 패킷의 전달은 신뢰성이 없는 통신이자 연결을 수립하는 과정이 없는 통신임 -> 전송 계층이 존재하는 이유 :: 최선형 전달

### IP의 한계를 보완하는 전송 계층

1. 전송 계층은 연결형 통신을 가능하게 함
2. 전송 계층은 신뢰성 있는 통신을 가능하게 함

- TCP 프로토콜 : 신뢰할 수 있는 통신, 연결형 통신
- UDP 프로토콜 : 신뢰할 수 없는 통신, 비연결형 통신

### 응용 계층과의 연결 다리\_ 포트

#### 포트의 정의

- 패킷이 실행 중인 특정 애플리케이션까지 전달되려면 패킷에 특정 애플리케이션을 식별할 수 있는 정보가 포함되어 있어야함

  - 이 정보를 포트라고함
  - (응용 계층의 애플리케이션 프로세스를 식별하는 정보)

- 전송 계층에서는 포트 번호를 통해 특정 애플리케이션을 식별함
  - 패킷 내 수신지 포트와 송신지 포트를 통해 송수신지 호스트의 애플리케이션을 식별함

| 포트종류       | 포트 번호 범위 |
| -------------- | -------------- |
| 잘 알려진 포트 | 0~1023         |
| 등록된 포트    | 1024 ~ 49151   |
| 동적 포트      | 49152 ~ 65535  |

- 잘 알려진 포트 = 시스템 포트 : 범용적으로 사용되는 애플리케이션 프로토콜
  | 잘 알려진 포트 번호 | 설명 |
  | --- | ---|
  | 20, 21 | FTP |
  | 22 | SSH |
  | 23 | TELNET |
  | 53 | DNS |
  | 67, 68 | DHCP |
  | 80 | HTTP |
  | 443 | HTTPS |

- 등록된 포트 : 덜 범용적
  | 등록된 포트 번호 | 설명 |
  | --- | --- |
  | 1194 | OpenVPN |
  | 1433 | Microsoft SQL Server 데이터베이스 |
  | 3306 | MySQL 데이터베이스 |
  | 6379 | Redis |
  | 8080 | HTTP 대체 |

- 동적포트 = 사설 포트 = 임시 포트

### 포트 기반 NAT

- NAT : IP 주소를 변환하는 기술임. 주로 네트워크 내부에서 사용되는 사설 IP 주소와 네트워크 외부에서 사용되는 공인 IP 주소 변환하는데 사용됨
- NAT 변환 테이블 : 변환의 대상이 되는 IP 주소 쌍이 명시되어 있음 (네트워크 외부, 네트워크 내부)
- NAPT : 포트 기반의 NAT = APT(Address Port Translation)

  - 포트를 활용해 하나의 공인 IP 주소를 여러 사설 IP 주소가 공유할 수 있도록 하는 NAT의 일종임
  - NAT 변환테이블에 포트번호도 같이 기록함

- 포트 포워딩 : 네트워크 내 특정 호스트 IP 주소와 포트 번호를 미리 할당하고, 해당 IP 주소 : 포트번호 로써 해당 호스트에게 패킷을 전달하는 기능임
- ICMP : IP 패킷의 전송 과정에 대한 피드백 메시지를 얻기 위해 사용하는 프로토콜임
  - IP의 신뢰할 수 없는 전송 특성과 비연결형 전송 특성을 보완하기 위한 네트워크 계층의 프로토콜
  1. 전송 과정에서 발생한 문제 상황에 대한 오류 보고
  2. 네트워크에 대한 진단 정보(네트워크상의 정보 제공)

참고 : 혼공네 복습
